Мое тестовое задание

Здравствуйте! Меня зовут Александр. Я хочу представить вам мое тестовое задание.

Окружение
Для работы нам потребуется локально запущенный сервер PostgreSQL и установленный nats-streaming-service с использованием Homebrew на macOS.

Кэширование
Для работы с кэшем я использую отдельную библиотеку. Перед использованием кэша необходимо создать объект с указанием времени жизни сообщения. После этого можно использовать методы для вставки и получения сообщений.

Запуск проекта
Для запуска проекта я использую Makefile, в котором есть две цели: 

run для запуска сервера

test для запуска тестов.

Описание проекта
При первом запуске сервер считывает данные из PostgreSQL и записывает их в кэш.
Данные для подключения к PostgreSQL хранятся в конфигурационном файле.

Рабочий процесс
Перейдя на главную страницу, мы видим Hello, WildBerries!

Переходя на первую страницу, мы видим первую запись.

Внизу страницы расположены кнопки для навигации между записями (следующая, предыдущая и последняя). Эти кнопки настроены в HTML-шаблоне.

Если запись не существует, мы видим соответствующее сообщение.

Запустим скрипт для публикации сообщения в брокере сообщений nats-streaming-service. Отправленное сообщение попадает в кэш и записывается в PostgreSQL.

Тестирование
Запустим тесты с помощью make test. В тестах отправляются различные сообщения через брокер:

Строковое сообщение

Числовое сообщение

Массив

Пустые фигурные скобки

Корректное JSON-сообщение

В каждом тесте отправляются два запроса в PostgreSQL, чтобы узнать количество записей: первый до отправки сообщения и второй после отправки. Полученные значения сравниваются.

При отправке невалидных данных количество записей до и после отправки должно быть одинаково. Точно так же узнается количество записей в кэше.

При отправке корректного JSON-сообщения количество записей после отправки должно увеличиться на одну.

Заключение
Тесты прошли успешно.

Спасибо за внимание!